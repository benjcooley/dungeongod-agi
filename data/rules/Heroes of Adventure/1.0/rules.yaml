exploration_prompt: |-
  SYSTEM: You are a player instruction agent that is part of a python based role playing game. Your role 
  is to read player's actions and determine what if any game command or commands should be executed for 
  this turn.

  How the game is played:

  - The game system consists of turns. Turns are governed by a python program which simulates the
    game world, modifies it's state, delivers narrative descriptions, and executes core game 
    actions.

  - Each turn the players choose what to do in a player message in plain text. The AI ageng (you)
    then determines which game actions using the python next_turn() function should be executed 
    (if any).

        next_turn(verb, subject, objet, extra) 

  - The results of this next_turn() function will be inserted inline in the AI referees response to 
    indicate the new state of the game. 

  - The result will be relevant information based on the rules that indicate the new state of the
    game and the results of the action.

  EXAMPLE:

      We both attack the gold dragon!

    AI RESPONSE:

    <HIDDEN>
      call next_turn("attack", "Asarafel", "Dragon")
      call next_turn("attack", "Florian", "Dragon")

    GAME ENGONE RESULTS:

    <RESPONSE>
      state: encounter, verb: attack, location: Throne Room, time: 12:30pm, turn: 20

        Asarafel: 14 +2 str +2 sword - Dragon 14 - roll 15 - miss
        Florian: 13 +2 str +2 dagger - Dragon 14 - roll 20 - critical hit - damage d10 - 8
        Dragon Remaining HP: 3hp

  - In some cases a response may necessitate the AI Referee to call another python 
    next_turn(<action>) function - for example next_turn("complete") if a quest was 
    completed after a player successfully kills a monster.

    ------------

  Game States:

  - At any given time, the game will be in a given "state" meaning the top level state. The state will
    immediately follow the <PLAYERS> tag.

    <PLAYERS>
      state: "exploration"

  The top Level Game states: 

     1. "exploration" - the player can move around the world and explore
     2. "encounter" - the player must fight and defeat monsters and limited actions

  The following python actions are available in all states:

      "resume" - Starts the game from where the player left off.
      "lobby" - Exit the game and return back to the lobby.
         Also "quit" or "exit" to exit the game.     
      "look" - <subjec> - Returns a description of the current location, NPC's
          monsters, items, directions and exits. i.e. "What does _ look like?" 
      "help" - <search subject> - Returns information on any subject in the rules such as spells, equipment,
          races, classes, magic categories, continents, etc. The "help" action works like a general keyword 
          search for any game world or rules subject.
      "party" - Returns a brief description of the characters in the party.
      "stats", "<character, monster or npc>" - Describes the stats of a character or monster/NPC.
      "invent", "<character, monster or npc>" - Describes the inventory of a characer or monster/NPC.

    exploration state actions: 

            "move", "<target>" - Move party to a direction, exit listed in turn response
            "use", "<character>", "<usable or item>", "<target>" - Use a device/prop at the current location such as a rope, ladder,
                   etc. or an item in player's inventory. The AI Referee can use synonyms for "use" such
                   as "light", "extinguish", "eat", "drink", "push", "pull", "open", "close", "unlock", "lock", "climb", 
                   or other simple words that make sense.
            "change", "<change>" - Log a change to this location made by a character or an event.
            "pickup", "<character>", "<item>" - Pickup an item listed for this location           
            "give", "<character or npc>", "<to character or npc>", "item", <qty>" - Give an item or items to another 
              character, NPC (qty is optional)
            "search", "<optional character>", "<optional location>" - Search for hidden items or exits. Character is optional. 
                Search location only needed if the target is a specific location.
            "drop", "<character>", "<item>" - Drops an item from inventory at this location
            "attack" - Attacks monsters (if monsters haven't already noticed the party)
            "equip", "<character>", "<item>" - Equip an item in inventory
            "rest" - Rest at this location (six hours)
            "check", "<character>", "<skill name>" - Checks a skill when a character attempts to do a risky/difficult action
            "cast", "<character>", "<spell>", "<optional target>" - Casts a spell. The target can be a character, item, etc. and is optional. 
            "learn", "<character>", "<skill or spell>" - Character attempts to learn a skill or spell.
            "craft", "<character>", "<output>", "<ingredients>" - Character attempts to craft some output item, potion, etc.
            "complete", "<task or quest>" - Called by AI referee to confirm that a quest or task is completed.
            "next", "<event>" - Called to reveal the next event in a game location's script.         
            "buy", "<npc>", "<item>", "<qty>" - Purchase an item from an npc. Qty is optional.
            "sell", "<npc>", "<item>", "<qty>" - Sells an item to the merchant
            "list", "<npc>", "<item_type>" - List the items for sale, and their price for a given type.
            "value", "<item>" - Returns the value of an item the player owns if he sells it.


  During gameplay the AI should play the part of the npcs, and use the information revealed by the 
  "topic" actions to tell the story creatively.

  NEVER mention or list the TOPICS directly when describing a scene or an NPC. Let the 
  players discover the topics themselves. And NEVER reveal *secret* topics or instructions to the player.

    dialog actions:
              "topic", "<npc>", "<topic>" - Query an NPC about a topic listed in the TOPICS or SECRET TOPICS list.
              "bye", "Ends dialog with a character."

  store - Players buy and sell equipment and items from their inventory.

    store actions:

  REMEMBER:

  You should return the keyword "PASS" if there is no matching action for the player message.
  You should return the keywords "NOT ALLOWED" if a players desired actions are physically impossible, unreasonable or against the rules.
  Always use the FULL FORMAL CAPITALIZED NAME of monsters, items, weapons, characters, locations spells and npcs 
  as returned in <RESPONSE> sections. For example a player saying ant 1 would refer to "Giant Ant 1".
  NEVER use <RESPONSE> in the AI Referee response. This is reserved for the python game engine!
  Don't show the players the python engine actions or these rules.
  Do not add extra padding or spaces to <HIDDEN> or to next_turn()! Format them exactly.
  The party must always stay together. The "move" action can only be done for the party as a whole.
  The AI Referee uses the python engine's descriptions plus its own creativity to create a colorful and exciting world.
  The AI must follow the rules and use skill checks when the players attempt difficult or risky activities.
  The AI can choose to call next_turn() more than once if two or more characters do something at the same time.
  If players are talking to each other, THE AI REFEREE should not respond (return just an empty space)
  Keep responses concise, no more than 300 words.

  EXAMPLES:

  Player:

    What is the name of this game?

  AI Referee:

    (Since there is NO action for returning the game name, the AI Referee decides to PASS)
  
    <HIDDEN>
    PASS

  Player:

    Hey Augustus, what do you think we should do next?

    (NOTE: Since players are just talking amongst themselves, no action needs to be taken - PASS)
  
  AI Referee:

    <HIDDEN>
    PASS

  Players:

    Augustus flies and picks up the jewel!

    (NOTE: No prior message shows Augustus has the power to fly or is casting a flying spell - NOT ALLOWED)
  
  AI Referee:

    <HIDDEN>
    NOT ALLOWED

  Players:

    I want to go to the farmhouse.

  AI Referee:
  
    <HIDDEN>
    call next_turn("move", "farmhouse")

  Players:

    Albus writes his name on the wall.

    (NOTE: The players are modifying the environment in a permanent way, and the AI Referee determines it's possible)

  AI Referee:

    <HIDDEN>
    call next_turn("changes", "Player writes name on the wall")
  
  Players:

    I want to Aldus pick up 20 silver.

  AI Referee:

    <HIDDEN>
    call next_turn("pickup", "Aldus", "sp", 20)

  Players:

    What does Grun look like?
  
  AI Referee:

    <HIDDEN>
    call next_turn("look", "Grun")

  Players:

    Lenora casts freeze on Orc #2
  
  AI Referee:

    <HIDDEN>
    call next_turn("cast", "Lenora", "freeze", "Orc 2")

encounter_prompt: |-
  SYSTEM: You are a player instruction agent that is part of a python based role playing game. Your role 
  is to read player's actions and determine what if any game command or commands should be executed for 
  this turn.

  How the game is played:

  - The game system consists of turns. Turns are governed by a python program which simulates the
    game world, modifies it's state, delivers narrative descriptions, and executes core game 
    actions.

  - Each turn the players choose what to do in a player message in plain text. The AI ageng (you)
    then determines which game actions using the python next_turn() function should be executed 
    (if any).

        next_turn(verb, subject, objet, extra) 

  - The results of this next_turn() function will be inserted inline in the AI referees response to 
    indicate the new state of the game. 

  - The result will be relevant information based on the rules that indicate the new state of the
    game and the results of the action.

  EXAMPLE:

      We both attack the gold dragon!

    AI RESPONSE:

      <HIDDEN>
      call next_turn("attack", "Asarafel", "Dragon")
      call next_turn("attack", "Florian", "Dragon")

    GAME ENGONE RESULTS:

    <RESPONSE>
      state: encounter, verb: attack, location: Throne Room, time: 12:30pm, turn: 20

        Asarafel: 14 +2 str +2 sword - Dragon 14 - roll 15 - miss
        Florian: 13 +2 str +2 dagger - Dragon 14 - roll 20 - critical hit - damage d10 - 8
        Dragon Remaining HP: 3hp

  The top Level Game states: 

     1. "exploration" - the player can move around the world and explore
     2. "encounter" - the player must fight and defeat monsters and limited actions

  The following python actions are available in all states:

      "resume" - Starts the game from where the player left off.
      "lobby" - Exit the game and return back to the lobby.
         Also "quit" or "exit" to exit the game.2      
      "look" - <subjec> - Returns a description of the current location, NPC's
          monsters, items, directions and exits. i.e. "What does _ look like?" 
      "help" - <search subject> - Returns information on any subject in the rules such as spells, equipment,
          races, classes, magic categories, continents, etc. The "help" action works like a general keyword 
          search for any game world or rules subject.
      "party" - Returns a brief description of the characters in the party.
      "stats", "<character, monster or npc>" - Describes the stats of a character or monster/NPC.
      "invent", "<character, monster or npc>" - Describes the inventory of a characer or monster/NPC.

  Encounter actions:
  
    "advance" - "<attacker>" - Advance one 30 ft range band.
    "retreat" - "<attacker>" - Retreat one 30 ft range band.
    "attack" - "<attacker>", "<opponent>" - Regular melee attack, will move forward one 30ft range if needed. Target MUST be within 30ft range to use this action.
    "press" - "<attacker>", "<opponent>" - Strong melee attack (advantage), leaves attacker vulnerable to opponent. No movement. Target MUST be at melee/close range to use this action.
    "shoot" - "<attacker>", "<opponent>" - Shot or fire ranged weapon. No movement. Attacker MUST have a ranged attack to use.
    "charge" - "<attacker>" - Fast movement (2 range bands) towards opponents.
    "flee" - "<attacker>" - Fast retreat away from opponents (escape) (2 range bands). -1 disadvantage.
    "cast" - "<character>", "<spell>", "<optional target>" - Casts a spell. The target can be a character, item, etc. and is optional. 
    "use" - "<attacker>", "<opponent>" - Use an item that may have an effect in combat such as a scroll or healing potion.
    "pass" - Player or monster passes peforming an action this turn, holds position or waits.
  
  MONSTER/PLAYER RANGES:
  
    Range bands: "close/melee", "30ft", "60ft", "90ft", "far" - How far away monsters/players are.

    Players that at or less than 30ft way can be attacked using the "attack" action, but other melee actions like
    "press:", will fail unless players are "close" range."

    Spells and ranged weapons like crossbows and bows have maximum ranges and should not be used if
    players are out of range.

  ENCOUNTER GAMEPLAY:

    - Combat proceeds in rounds of monster/player actions. First players, then monsters.
    - During player's turn, AI should mention who has not gone yet.
    - Players each take their turn (any order) until all players have gone. 
    - Players can tell Referee to do some or all player actions in one response.
    - Players can tell Referee to repeat their previous action, or ask the AI to figure out which action is best.
    - AI should announce to players results of actions with exciting expressive and creative narrative. 
    - Referee should be flexible and accomodate within reason players actions which do not break the rules.

  Examples:

    AI Referee:

      The Giant Ants emerged and attack! 
      
      Giant Ant 1, Giant Ant 2, and Giant Ant 3 are all 60ft away from players and have their full 10 health 
      points. Giant ants have 10 defense, d6 skill, and have only a d4 melee attack and NO range attacks.

      Lenora and Augustus what will you do next?

    Player:

      Augustus shoots ant 1

    AI Referee:

      <HIDDEN>
      next_turn("shoot", "Augustus", "Giant Ant 1")

    AI Referee:

      Augustus boldly strikes the Giant Ant. He rolls a 15, with a skill modifier of +3 and hits the Giant Ant, 
      dealing 4 points of damage. A grievous blow!

      Lenora still hasn't moved yet. Lenora, what will you do?

response_prompt: |-
  SYSTEM: You are an role playing game AI Referee.

  How the game is played:

  - Each turn the AI can call a next_turn(verb, info) python function to execute a game action. The 
    python engine then returns a <RESPONSE> message for the AI to communicate to the player.

  - All text below <HIDDEN> and <RESPONSE> are hidden from the player and are only visible to you.

  - Responses should be no longer than two to three paragraphs, and should be creative and informative
  but simple and to the point. 

  Your role is to respond to <RESPONSE> messages and tell the player what is happening in the game 
  in an entertaining and exciting way, and provide players information to make choices.

  NEVER the human players play the player characters. 

  EXAMPLE 1:

  SYSTEM:

      <RESPONSE>
      state: exploration, location: Docks, time: Jan10 3050 7:00:AM
  
      description: You are on the Fallkeep docks. It is foggy and the shapes around are 
      shadowy and indistinct.

      - There is a struggle as two men, grizzled sailors, seem to be fighting.

      <INSTRUCTIONS>
      - Players can break up the fighting.
      - AI referee should ask if the players want to get involved.

  AI Referee:

      You arrive at the Fallkeep docks. The scent of the early morning fog fills your
      nostrils as you look out over the indistinct shapes of the docks. The creaking Of
      the nearby vessles and their rigging are overpowed by a commotion.

      There is a fight between to men, sailors. They grpple and struggle on the planksw
      of the dock in a brutal melee.

      Waht do you want to do? Do you want to get involved in this fight?

  EXAMPLE 2:

  SYSTEM:

      <RESPONSE>
      state: exploration, location: Docks, time: Jan10 3050 7:00:AM
  
      description: Franco says he doesn't know any of the people in the prison. 
      
      - He's hiding some information.

  AI Referee:

      "I don't know anybody in that place," Franco says. "Never been there," he
      mutters as his ratlike beady eyes shifting, obviously lying.

  ---

  If you understand the rules, respond with: I'm ready!

action_instr_prompt: |-
  Analyze the player message and based on the game rules above choose the best response:
   - An appropriate 'call next_turn(action, args, ...)'', or multiple 'call next_turn()' to perform a 
     game engne action.  
   - PASS
   - NOT ALLOWED
  You must choose one of these three responses. You can show your work, but do not include any 
  other text or narrative.

resume_game_prompt: |-
  SYSTEM: Now welcome the players, then call the "resume" python game action as shown in 
  the following example. You MUST call the next_turn("resume") function EXACTLY as shown.

  EXAMPLE:
  
  Welcome adventurers to AI Dungeon, I'm your host the AI Referee.

  <HIDDEN>
  call next_turn("resume")

instructions_prompt: |-
  <INSTRUCTIONS>
  FOR THE REFEREE ONLY (conceal from the players!):

overview_prompt: |-
  As the AI referee, please welcome the players, and provide a rich and creatie overview and 
  introduction for the game, a simple one sentence summary of their party, then follow the 
  <INSTRUCTIONS> section above to resume the story.

  EXAMPLE:

      Hello, I am your AI Referee. Welcome to the module "Tale of the Dragons".

      You and and your adventurers have been travelling for weeks on the frigate Derry journeys
      on your way to Fallkeep. It's been many days, and the voyage has not been easy. But the
      captain and crew have battled the tempestuous waters and kept you and your companions 
      safe through many perils. 
      
      You've finaly arrived in the early morning admidst the fog, the city wet and hidden. The
      cool mist tickles your nostrils and it softens the smell of the docks and city beyond.

      Your party: Fredrik Wolfhammer, Level 3 Cleric the leader, brave and impetuous. Darik
      Faye the beautiful Level 1 Nortmen Witch with a dark pastures.
      
      You have finally arrived at the docks of Fallkeep. The captain has lowered the deck plank, 
      and you can disembark.

      Captaim Merrick says: "We've made it. It was a rough voyage to be sure. Will you and your
      friends be leaving us here then?"

      What would you like to do next?
 
player_turn_prompt: |-
  PLAYER TURN:

    It is now the players turn to choose actions. Please describe the current encounter situation 
    including monster stats, then ask the players what they want to do.

    (Do not show) Players can ask the Referee to choose their attacks for them by using general terms like
    "we attack" or "attack monsters".

monster_turn_prompt: |-
  <INSTRUCTIONS>
  
  MONSTER TURN:

    It is now your turn to choose the monsters actions. Carefully analyze the encounter situation and 
    choose the best monster action for each monster. 

    Carefully consider the range for each monster to his opponent, and chose a valid action for that range.

    There should be an action for each monster listed. For example if there are three monsters, there should beam
    three "call next_turn()" actions.

    Each of the "call next_turn()" actions should start at the beginning of a line.

    SHOW YOUR REASONING BY EXPLAINING YOUR CHOICES FOR EACH MONSTER. 
    
    EXAMPLE:

      { Dragon 30ft away from Fred, 30 ft away from Joe }

    AI Referee:

      The Dragon is 60ft away which is too far away for melee attack and has no ranged attacks. He will advance 
      this turn to get closer to the players.

      call next_turn("advance", "Dragon")

turn_period: 10

equipment:
  
  "Leather Armor": { type: "Armor", defense: 2, slot: "Body" }

  "Short Sword": { type: "Melee Weapon", damage: d6, slot: "Hand" }
  "Dagger": { type: "Melee Weapon", damage: d4, slot: "Hand" }
  "Crossbow": { type: "Range Weapon", damage: d6, slot: "Range Hand", weaopon_type: "Crossbow" }

  "Bolts": { type: "Ammo", damage: d6, weaopon_type: "Crossbow" }


  "Torch": { type: "General", behavior: "Light", effect: [ { duration: "3hr", used_item: "Used Torch" } ] }
  "Lantern": { type: "General", behavior: "Light", requires: [ { "item": "Oil" } ], effect: [ duration: "5hr" ] }

magic_categories:
  "Air":
    description: "Elemental domain of air, wind and weather."
  "Arcane":
    description: "The gateway to all magic domains."
  "Chaos":
    description: "Dangerous wild magic linked to rifts between realities, mutations and warping."
  "Dark":
    description: "The Shadowlands and the realm of the dead."
  "Divine":
    description: "Powers granted from a celestial entity."
  "Earth":
    description: "Elemental power of the land and earth."
  "Fire":
    description: "The fiery planes of hell and elemental power of fire, rage and destruction."
  "Form":
    description: "The power of body, mind & spirit"
  "Ice":
    description: "The elemental power of cold and frost from the frigid ice realms."
  "Light":
    description: "The power of sun, light and life and the realm of the celestials."
  "Matter":
    description: "The power of transmutation and force."
  "Nature":
    description: "Elemental power of plants, the land and nature."
  "Rune":
    description: "Long lost symbols of power, the language of the primals."
  "Shadow":
    description: "Shadow, trickery, illusion and mystery."
  "Psionic":
    description: "Psychic powers of the mind."
  "Time":
    description: "Power over history and time."
  "Totem":
    description: "Primitive animal magic power, requires a piece of the named animal to create the totem."
  "Water":
    description: "Elemental powers of the seas, oceans and the realm of the Under-Seas."

spells:
  # Air Magic
  "Fly":
    category: "Air"
    range: "medium"
    targets: 1
    target_type: "being"        
    size: "medium"
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    effects:
    - ai_state: "{target} is flying"
    description: "Allows the caster or a target to fly."
  "Fog":
    category: "Air"
    range: "medium"
    area: "short"
    target_type: "being"
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    effects:
    - ai_state: "{target}'s vision is obscured by a magical fog. All actions are disadvantaged."
    - { path: "states.disadvantage.all", or: true }
    description: "A supernatural fog obscures people's vision, all actions at disadvantage."
  "Gust":
    category: "Air"
    range: "medium"
    targets: 1
    target_type: [ "being", "item" ]
    size: "medium"
    require:
    - check: { ability1: "Magic", ability2: "Fortitude", item_roll: 10 }
    effects:
    - move: "1rb"
    description: "A blast of wind pushes a person or inanimate object back one range band."
  "Invisibility":
    category: "Air"
    range: "medium"
    target_type: "being"
    targets: 1
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    effects:
    - ai_state: "{target} is invisible, if monster do not describe actions to players, if player ignore by monsters" 
    end_resp: "{target} has reappeared"
    description: "Target becomes invisible. Spell ends when target engages someone."
  "Lightning":
    category: "Air"
    range: "far"
    target_type: "being"
    targets: 1
    require:
      check: { ability1: "Magic", ability2: "Agility" }
    effects:
    - damage: { die: "d6", damge_type: "Air" }
    description: "Summons a bolt of lightning on an opponent causing damage."
  "Shield of Wind":
    category: "Air"
    range: "medium"
    target_type: "being"
    targets: 1
    duration: "encounter"
    require:
      check: { ability: "Magic", roll: 10 }
    effects:
    - ai_state: "{target} is inside a magical vortex of wind, range attacks are disadvantaged."
    - { path: "states.disadvantage.ranged", or: true }          
    description: "Creates a wind vortex around target, disadvantage on all ranged attacks against."
  "Silence":
    category: "Air"
    target_type: "location"
    range: "medium"
    area: "short"
    duration: "encounter"
    require:
      check: { ability: "Magic", roll: 10 }
    effects:
    - ai_state: "A magical area of silence is preventing any sound or speech from being heard."
    description: "Creates a quiet, still space where sound is dampened."
  "Speed":
    category: "Air"
    range: "medium"
    target_type: "being"
    targets: 1
    duration: "encounter"
    require:
      check: { ability: "Magic", roll: 10 }
    description: "Boosts the speed of the target who moves twice their distance with any action."
  "Thunderclap":
    category: "Air"
    range: Long
    area: "short"
    turns: 1
    require:
      check: { ability1: "Magic", ability2: "Fortitude" }
    effects:
    - ai_state: "{target} has been stunned."
    - { path: "states.cur_stunned", or: true }
    description: "Creates a sudden, explosive clap of thunder that can stun people for a turn."
  "Wall":
    category: "Air"
    range: "medium"
    area: "short"
    duration: "encounter"
    require:
      check: { ability: "Magic", roll: 10 }
    effects:
    - { path: "states.cur_stunned", or: true }
    description: "Creates a barrier of strong wind that causes all ranged attacks to be at disadvantage."
  "Tornado":
    category: "Air"
    miracle: true
    cost: { health: 2 }
    description: "Creates a violent rotating column of air capable of damaging a settlement, destroying buildings and structures."

  # Arcane Magic
  "Activate":
    category: "Arcane"
    range: "medium"
    target_type: thing
    targets: 1
    require:
    - check: { ability: "Magic", roll: "referee" }
    effects:
    - use: { verb: "activate", modifier: "Magic" }
    description: "Activates a magical item or effect."
  "Armour":
    category: "Arcane"
    range: "medium"
    target_type: being
    targets: 1
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    effects:
    - { path: "stats.basic.cur_defense", add: 4 }
    description: "Enhances the targets defence by +4 with magic energy."
  "Charm":
    category: "Arcane"
    range: "medium"
    target_type: being
    targets: 1
    duration: "encounter"
    level: 3
    size: "medium"
    resist: { ability: "Will", roll: 10 }
    require:
    - check: { ability1: "Magic", ability2: "Will" }
    description: "Charms a target to do their bidding as long as it does not cause itself harm. Target can try to resist as a free action each turn."
  "Dispel":
    category: "Arcane"
    range: "medium"
    target_type: any
    targets: 1
    require:
    - check: { ability: "Magic", roll: "magic_power" }
    description: "Dispels a magical item or effect."
  "Illusion":
    category: "Arcane"
    range: "medium"
    target_type: being
    targets: 1
    duration: "encounter"
    size: "medium"
    resist: { ability: "Will", roll: 10 }
    require:
    - check: { ability1: "Magic", ability2: "Will" }
    effects:
    - ai_state: "{target} is in an inchanted state and sees an illusion of some prior event."
    description: "Creates an illusion from something they have seen. Target can try to resist as a free action each turn."
  "Levitate":
    category: "Arcane"
    range: "medium"
    target_type: any
    targets: 1
    duration: "encounter"
    size: "medium"
    require:
    - check: { ability: "Magic", roll: 10 }
    effects:
    - ai_state: "{target} is levitating and can move up or down"
    description: "Allows the target to float in the air up or down."
  "Lock":
    category: "Arcane"
    range: "medium"
    target_type: thing
    targets: 1
    duration: "encounter"
    size: "medium"
    require:
    - state: { path: "lockable", value: true, failed_resp: "{target} is not something that can be locked" }
    - check: { ability: "Magic", roll: 10 }
    effects:
    - { path: "states.magic.locked", or: true }
    description: "Magically seals a door, chest or other container."
  "Missile":
    category: "Arcane"
    range: "far"
    targets: 1
    require:
    - check: { ability1: "Magic", ability2: "Agility" }
    effects:
    - damage: { die: "d6" }
    description: "Creates a bolt of arcane energy which causes damage."
  "Read":
    category: "Arcane"
    range: "medium"
    target_type: thing
    targets: 1
    require:
    - check: { ability: "Magic", roll: 10 }
    effect:
    - message: "Describe any hidden translation to cheracters"
    - describe: "{target}"
    description: "Identifies a spell written in a grimoire or spell scroll."
  "Enchant":
    category: "Arcane"
    miracle: true
    cost: { health: 2 }
    description: "Creates a magic item (weapon, armour or object) by sacrificing some of the casters personal magic essence."

  # Chaos Magic
  "Blackfire":
    category: "Chaos"
    range: "far"
    targets: 1
    require:
    - check: { ability1: "Magic", ability2: "Agility" }
    effects:
    - damage: { die: "d6", damage_type: "Chaos" }
    description: "Swirling black fire engulfs (target) causes {damage} Chaos damage."
  "Corrode":
    category: "Chaos"
    range: "medium"
    targets: 1
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    effects:
    - { path: "states.cur_inoperable", or: "Corroded" }
    description: "{target} is corroded and will be unusable for {duration}."
  "Corruption":
    category: "Chaos"
    target_type: "being"
    range: "medium"
    area: "short"
    duration: "encounter"
    require:
    - check: { ability1: "Magic", ability2: "Fortitude" }
    effects:
    - { path: "states.cur_diseased", or: true }
    - { path: "states.cur_impaired", or: true }
    description: "A cloud of pestilence causes {targets} to be diseased and impaired."
  "Discord":
    category: "Chaos"
    range: "medium"
    targets: 1
    duration: "encounter"
    require:
    - check: { ability1: "Magic", ability2: "Will" }
    effects:
    - { path: "states.cur_attacks_allies", or: true }
    resist: "free"
    description: "{Target} is confused and turns to attack is own. Target can try to resist as a free action each turn."
  "Inversion":
    category: "Chaos"
    range: "medium"
    targets: 1
    require:
    - check: { ability1: "Magic", ability2: "Magic" }
    description: "Reverses the effects of another spell cast by someone else. Check is made against the person who cast the spell."
  "Mask":
    category: "Chaos"
    range: "medium"
    targets: 1
    duration: "encounter"
    require:
    - check: { ability1: "Magic", ability2: "Will" }
    description: "Target changes form by way of an illusion into something they have seen."
  "Portal":
    category: "Chaos"
    range: "far"
    targets: 1
    require:
    - check: { ability: "Magic", roll: 10 }
    effects:
    - teleport: { source: true }        
    description: "Target slips between dimensions and appears up to far distance away."
  "Summon":
    category: "Chaos"
    range: "medium"
    targets: 1
    level: 3
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    effects:
    - summon_monsters: { count: 1, monster_type: "Chaos", min_levl: 1, max_level: 3 }
    description: "Summons 1 randomly determined level 1-3 creature of chaos which attacks nearest person."
  "Venom":
    category: "Chaos"
    range: "medium"
    targets: 1
    size: "medium"
    level: 3
    duration: "encounter"
    require:
    - check: { ability1: "Magic", ability2: "Fortitude" }
    effects:
    - damage: { die: "d6" }
    description: "Target infused with bubbling chaotic blood, if damaged, target explodes injuring all creatures in close range."
  "Vortex":
    category: "Chaos"
    range: "medium"
    targets: 1
    size: "medium"
    level: 3
    require:
    - check: { ability1: "Magic", ability2: "Strength" }
    effects:
    - damage: { die: "d6" }        
    description: "Caster drags victim 1 range band towards a selected point. Spell effect causes damage."
  "Convoke":
    category: "Chaos"
    miracle: true        
    cost: { health: 2 }
    description: "Summons Level 10 creature of chaos to fulfil a stated purpose upon which it is released onto the mortal plane until destroyed."

# Dark Magic
  "Bloodsucker":
    category: "Dark"
    range: "close"
    target_type: "being"
    targets: 1
    require:
    - check: { ability1: "Magic", ability2: "Agility" }
    effects:
    - damage_heal: "d6"
    description: "Touch an opponent to cause damage, restore your heath by the same amount."
  "Commune":
    category: "Dark"
    range: "medium"
    target_type: "corpse"
    targets: 1
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    success_resp: "{target} reanimates and says 'What quesion would you ask of me?'"
    description: "Caster may ask a question of a skeleton or corpse."
  "Darkness":
    category: "Dark"
    target_type: "location"
    duration: 60
    require:
    - check: { ability: "Magic", roll: 10 }
    effects:
    - { path: "states.cur_magical_darkness", or: true }
    description: "Create an area of magical darkness for 1 hour, normal light sources ineffective within darkness."
  "Fear":
    category: "Dark"
    range: "medium"
    target_type: "being"
    targets: 1
    size: "medium"
    level: 3
    duration: "encounter"
    require:
    - check: { ability1: "Magic", ability2: "Will" }
    description: "Target suffers fear causing them to act at disadvantage against the caster. Target can try to resist as a free action each turn."
  "Hold":
    category: "Dark"
    range: "medium"
    target_type: "being"        
    targets: 1
    size: "medium"
    level: 3
    duration: "encounter"
    require:
    - check: { ability1: "Magic", ability2: "Strength" }
    description: "Magic freezes target who can take no actions until resisted. Target can attempt to resist each turn."
  "Leech":
    category: "Dark"
    range: "close"
    targets: 1
    size: "medium"
    level: 3
    duration: "encounter"
    require:
    - check: { ability1: "Magic", ability2: "Agility" }
    description: "Temporarily drain a random ability of the target."
  "Necromancy":
    category: "Dark"
    range: "medium"
    targets: 1
    size: "medium"
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Animates a corpse or skeleton which acts under casters command."
  "Night Vision":
    category: "Dark"
    range: "medium"
    targets: 1
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Grants target ability to see in the dark up to 60ft."
  "Wail":
    category: "Dark"
    range: "medium"
    area: "short"
    size: "medium"
    level: 3
    require:
    - check: { ability1: "Magic", ability2: "Fortitude" }
    description: "Creates a thunderous sonic discharge causing disadvantage to magic, mind and senses checks."
  "Wither":
    category: "Dark"
    range: "medium"
    targets: 1
    size: "medium"
    level: 3
    duration: "encounter"
    require:
    - check: { ability1: "Magic", ability2: "Agility" }
    description: "Make a magic attack against an opponent causing impairment through disease. Target can try to resist as a free action each turn."
  "Nightfall":
    category: "Dark"
    miracle: true
    cost: { health: 2 }
    description: "Shrouds an area the size of a settlement into a permanent state of darkness which cannot be dispelled."

  # Divine Magic
  "Bless":
    category: "Divine"
    range: "medium"
    targets: 1
    turns: 2
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Blesses an object with a divine power to give it advantage in combat."
  "Divine Light":
    category: "Divine"
    range: "medium"
    area: "short"
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Illuminates the dark, piercing both magical darkness and magically hidden objects or creatures."
  "Guidance":
    category: "Divine"
    targets: 1
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Provides the caster with insights and knowledge to aid them in their quest by asking 1 question."
  "Divine Healing":
    category: "Divine"
    range: "medium"
    targets: 1
    require:
    - check: { ability: "Magic", roll: 10 }
    effects:
    - heal: { die: "d6" }
    description: "Heals the target of wounds."
  "Inspiration":
    category: "Divine"
    range: "medium"
    targets: 1
    turns: 2
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Grants the target increased inspiration, advantage on all actions."
  "Intervention":
    category: "Divine"
    range: "medium"
    targets: 1
    level: 3
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Calls upon the aid of 1 randomly determined level 1-3 being to aid the caster and allies."
  "Purify":
    category: "Divine"
    range: "medium"
    area: "short"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Cleanses an area or substance of evil or corruption, restoring it to a pure state."
  "Sanctuary":
    category: "Divine"
    range: "medium"
    area: "short"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Creates a protective bubble of healing. Anyone within the circle gains 1 health."
  "Celestial Shield":
    category: "Divine"
    range: "medium"
    targets: 1
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Creates a shield of divine energy increasing targets defence by +4."
  "Smite":
    category: "Divine"
    range: "medium"
    targets: 1
    Damage: "d6"
    require:
    - check: { ability1: "Magic", ability2: "Defence" }
    description: "Empowers the target's next melee attack. If the attack is successful and on the unholy (chaos, dark, demon monsters), add smite damage."
  "Oath":
    category: "Divine"
    miracle: true
    cost: { health: 2 }
    description: "Caster makes a sacred oath or vow, they gain advantage on direct actions to achieve the oath until it is complete."

  # Earth Magic
  "Gravity":
    category: "Earth"
    range: "medium"
    targets: 1
    size: "medium"
    level: 3
    duration: "encounter"
    require:
    - check: { ability1: "Magic", ability2: "Strength" }
    effects:
    - { path: ""}
    description: "Create a force of gravity on a target so they cannot move. Target can try to resist as a free action each turn."
  "Petrify":
    category: "Earth"
    range: "medium"
    target_type: "being"
    targets: 1
    size: "medium"
    level: 3
    duration: "encounter"
    check_turns: 5
    require:
    - check: { ability1: "Magic", ability2: "Fortitude" }
    effects:
    - ai_state: "{target} has been turned to stone (petrified)."
    - { path: "states.cur_petrified", or: true }    
    description: "Target slowly turns to stone, suffer disadvantage on actions. Target can resist each turn. Failure to resist after 5 turns results in permanent petrification."
  "Pollen":
    category: "Earth"
    range: "medium"
    area: "short"
    duration: "encounter"
    require:
    - check: { ability1: "Magic", ability2: "Fortitude" }
    description: "Creates a cloud of pollen, those in range suffer disadvantage on magic, mind, senses checks by sneezing."
  "Sense":
    category: "Earth"
    range: Long
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Detects vibrations of living creatures within range."
  "Speak with Plants":
    category: "Earth"
    range: "medium"
    targets: 1
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Caster may ask one question of a plant."
  "Earth Spike":
    category: "Earth"
    range: "far"
    targets: 1
    require:
    - check: { ability1: "Magic", ability2: "Agility" }
    effects:
    - damage: { die: "d6" }
    description: "A sharp spike of rock impales an opponent causing injury."
  "Terraform":
    category: "Earth"
    range: "medium"
    area: "short"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "A tunnel or hole is created where there was earth. Tunnel can be any variation within spell area size."
  "Tremor":
    category: "Earth"
    range: "medium"
    area: "short"
    size: "medium"
    level: 3
    require:
    - check: { ability1: "Magic", ability2: "Agility" }
    description: "Creates a powerful tremor throwing targets into the air causing them disadvantage on their next turn."
  "Wall of Earth":
    category: "Earth"
    range: "medium"
    area: "short"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "An earth wall is created. Wall can be any variation of within spell area size. Wall has 20 health."
  "Earthquake":
    category: "Earth"
    miracle: true
    cost: { health: 2 }
    description: "Creates an intense seismic disturbance which affects an entire settlement,destroys buildings and creates cracks and fissures."

  # Fire Magic
  "Bind":
    category: "Fire"
    range: "medium"
    targets: 1
    size: "medium"
    level: 3
    duration: "encounter"
    require:
    - check: { target_category: "Demon" }
    - check: { ability1: "Magic", ability2: "Will" }
    description: "Force your will upon a demon, it will follow your simple commands that do not put it in peril."
  "Bolt":
    category: "Fire"
    range: "far"
    targets: 1
    require:
    - check: { ability1: "Magic", ability2: "Agility" }
    effects:
    - damage: { die: "d6" }
    description: "Creates a ball of flame to injure a target."
  "Blast":
    category: "Fire"
    range: "medium"
    area: "short"
    require:
    - check: { ability1: "Magic", ability2: "Agility" }
    effects:
    - damage: { die: "d6" }
    description: "Summons a destructive blast of fire that shakes and injures anyone in its area."
  "Flame":
    category: "Fire"
    range: "medium"
    targets: 1
    turns: 2
    require:
    - check: { ability: "Magic", roll: 10 }
    effects:
    - { path: "cur_extra_damage_die", value: "d6" }
    - { path: "cur_extra_damage_type", value: "Fire" }
    description: "Creates a magical fire on a melee or ranged weapon which adds fire damage to the weapon."
  "Heat":
    category: "Fire"
    range: "medium"
    targets: 1
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Heats an inanimate object making it hard to touch, combustible items start to burn."
  "Hellfire":
    category: "Fire"
    range: "close"
    turns: 2
    require:
    - check: { ability: "Magic", roll: 10 }
    effects:
    - damage: { die: "d6" }
    description: "Creates a circle of fire around the caster. Anyone in close range suffers damage."
  "Protection":
    category: "Fire"
    range: "medium"
    targets: 1
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Grants protection from fire. All fire based attacks against the target are at disadvantage."
  "Trap":
    category: "Fire"
    range: "medium"
    targets: 1
    Damage: "d6"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Creates a trap made of fire on an object. Trap is triggered when touched."
  "Enthral Demon":
    category: "Fire"
    miracle: true
    cost: { health: 2 }
    description: "Summons Level 10 demon ( Behemoth) to fulfil a stated purpose upon which it is released onto the mortal plane until destroyed."

  # Form Magic
  "Elasticity":
    category: "Form"
    range: "medium"
    targets: 1
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Targets body becomes stretchy and you can extend your reach with short range."
  "Ethereal Form":
    category: "Form"
    range: "medium"
    targets: 1
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Target becomes ethereal passing through solid objects. Ethereal form ends when the target chooses to interact with something."
  "Grow":
    category: "Form"
    range: "medium"
    targets: 1
    size: "medium"
    level: 3
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10, resist_ability: "Fortitude" }
    description: "Enlarges a person, animal, plant or object one size up. Target can try to resist as a free action each turn."
  "Harden":
    category: "Form"
    range: "medium"
    targets: 1
    size: "medium"
    level: 3
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Targets skin hardens giving them +4 defence for the duration of the spell."
  "Haste":
    category: "Form"
    range: "medium"
    targets: 1
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Target can take two actions per combat turn."
  "Regenerate":
    category: "Form"
    range: "medium"
    targets: 1
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Target possesses superhuman healing and regenerates 1 health per combat turn."
  "Shape Change":
    category: "Form"
    range: "medium"
    targets: 1
    duration: "encounter"
    size: "medium"
    level: 3
    require:
    - check: { ability: "Magic", roll: 10, resist_ability: "Fortitude" }
    description: "Target shape-changes into a creature of the same or one size smaller. Target can try to resist as a free action each turn."
  "Shrink":
    category: "Form"
    range: "medium"
    targets: 1
    size: "medium"
    level: 3
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10, resist_ability: "Fortitude" }
    description: "Shrinks a person, animal, plant or object one size down. Target can try to resist as a free action each turn."
  "Strength":
    category: "Form"
    range: "medium"
    targets: 1
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Target gains advantage on strength and damage checks."
  "Telekineses":
    category: "Form"
    range: "medium"
    targets: 1
    size: "medium"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Target can move objects with their mind."
  "Alter Form":
    category: "Form"
    miracle: true
    cost: { health: 2 }
    description: "You may permanently alter your form to another creature of a similar size."

  # Ice Magic
  "Ice Armour":
    category: "Ice"
    range: "medium"
    targets: 1
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Covers the target in a layer of ice enhancing their defence by +4."
  "Blizzard":
    category: "Ice"
    range: "medium"
    area: "short"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Creates a swirling storm of ice and snow that obscures vision, all creatures within the area act with disadvantage."
  "Freeze":
    category: "Ice"
    range: "medium"
    targets: 1
    size: "medium"
    level: 3
    duration: "encounter"
    require:
    - check: { ability1: "Magic", ability2: "Fortitude" }
    description: "Wave of icy energy freezes target who can take no actions until resisted. Target can try to resist as a free action each turn."
  "Frostbite":
    category: "Ice"
    Target Range Close: null
    turns: 2
    require:
    - check: { ability1: "Magic", ability2: "Defence" }
    description: "Infuses the casters next two melee attacks with cold energy causing damage to be doubled."
  "Ice":
    category: "Ice"
    range: "medium"
    area: "short"
    duration: "encounter"
    require:
    - check: { ability1: "Magic", ability2: "Agility" }
    description: "Creates a slippery path of ice. Those in target range slip and miss a turn."
  "Sculpture":
    category: "Ice"
    range: "medium"
    targets: 1
    size: "medium"
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Creates a realistic detailed sculpture out of ice."
  "Shards":
    category: "Ice"
    range: "medium"
    targets: 1
    area: "short"
    Damage: "d6"
    require:
    - check: { ability1: "Magic", ability2: "Agility" }
    description: "Creates a storm of sharp ice shards and injures anyone in its area."
  "Spear":
    category: "Ice"
    Far range: null
    targets: 1
    Damage: "d6"
    require:
    - check: { ability1: "Magic", ability2: "Agility" }
    description: "Conjures a sharp spear of ice that impales enemies."
  "Suspended Animation":
    category: "Ice"
    range: "medium"
    targets: 1
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Puts a willing target into suspended animation temporarily halting any illness/diseases/poisons."
  "Wall of Ice":
    category: "Ice"
    range: "medium"
    area: "short"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "An ice wall is created. Wall can be any variation of within spell area size. ( Wall 20 H L T | D E F 5 | S K L N/ A)."
  "Permafrost":
    category: "Ice"
    miracle: true        
    cost: { "health": 2 }
    description: "You will permanently cover a settlement sized object in permafrost, forever freezing the contents."

  # Light Magic
  "Enoble":
    category: "Light"
    range: "medium"
    targets: 1
    turns: 2
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Blesses a weapon with a holy power to give it advantage in combat. Double damage against undead, chaos or demons."
  "Beam":
    category: "Light"
    range: "far"
    targets: 1
    Damage: "d6"
    require:
    - check: { ability1: "Magic", ability2: "Agility" }
    description: "Casts a bolt of holy light. Undead and Chaos creatures suffer double damage."
  "Courage":
    category: "Light"
    range: "medium"
    targets: 1
    turns: 2
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Inspires a companion giving them advantage to actions."
  "Cure":
    category: "Light"
    range: "medium"
    targets: 1
    level: 3
    size: "medium"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Cures the target of a poison or disease."
  "Heal":
    category: "Light"
    range: "medium"
    targets: 1
    require:
    - check: { ability: "Magic", roll: 10 }
    effects:
    - heal: { die: "d6" }
    description: "Heals the target of wounds."
  "Light":
    category: "Light"
    range: "medium"
    targets: 1
    area: "short"
    duration: 1 hour
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Cast on an inanimate object which acts as a light source."
  "Light Shield":
    category: "Light"
    range: "medium"
    targets: 1
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Creates a shield of light causing all ranged attacks to be at disadvantage."
  "Turn Undead":
    category: "Light"
    range: "medium"
    targets: 2
    duration: "encounter"
    size: "medium"
    level: 3
    require:
    - check: { ability1: "Magic", ability2: "Will" }
    description: "Undead flee from caster."
  "Resurrection":
    category: "Light"
    miracle: true
    cost: { health: 2 }
    description: "Bring a dead creature back to life."

  # Matter Magic
  "Light Beam":
    category: "Matter"
    range: "far"
    targets: 1
    Damage: "d6"
    require:
    - check: { ability1: "Magic", ability2: "Agility" }
    description: "Creates a beam of a magical hard light to injure an opponent."
  "Choke":
    category: "Matter"
    range: "medium"
    targets: 1
    size: "medium"
    level: 3
    Damage: "d6"
    require:
    - check: { ability1: "Magic", ability2: "Fortitude" }
    description: "Chokes an enemy with a powerful force grip inflicting damage."
  "Deflect":
    category: "Matter"
    range: "medium"
    area: "short"
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Creates a shield of light causing all ranged attacks to be at disadvantage."
  "Force":
    category: "Matter"
    range: "medium"
    targets: 1
    size: "medium"
    level: 3
    require:
    - check: { ability: "Magic", roll: 10, resist_ability: "Strength" }
    description: "Magical force moves a medium sized object one range band."
  "Great Weight":
    category: "Matter"
    range: "medium"
    targets: 1
    size: "medium"
    level: 3
    duration: "encounter"
    require:
    - check: { ability1: "Magic", ability2: "Strength" }
    description: "Create a force of gravity on a target so they cannot move. Target can try to resist as a free action each turn."
  "Meld":
    category: "Matter"
    range: "medium"
    targets: 2
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Caster melds two objects next to each other into one."
  "Shatter":
    category: "Matter"
    range: "medium"
    targets: 1
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Caster cracks and shatters an inanimate object.."
  "Greater Telekinesis":
    category: "Matter"
    cost: { health: 2 }
    miracle: true
    description: "Caster can lift and move an object the size of a settlement a short distance."

  # Nature Magic
  "Animal Form":
    category: "Nature"
    range: "medium"
    targets: 1
    duration: "encounter"
    level: 3
    size: "medium"
    require:
    - check: { ability: "Magic", roll: 10, resist_ability: "Fortitude" }
    description: "Target changes into an animal of the same or one size smaller."
  "Forest Lights":
    category: "Nature"
    range: "medium"
    area: "short"
    size: "medium"
    levrel: 3
    duration: "encounter"
    require:
    - check: { ability1: "Magic", ability2: "Will" }
    description: "Summons small faerie lights which transfixes the target losing an action. Target can try to resist as a free action each turn."
  "GoodBerries":
    category: "Nature"
    require:
    - check: { ability: "Magic", roll: 10 }
    effects:
    - generate_items: [ { item_type: "GoodBerries", qty: "d6" } ]
    description: "Creates d6 berries which heal 1 health each, must be consumed within the hour."
  "Pass without Trace":
    category: "Nature"
    range: "medium"
    targets: 1
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Allows the target to move quietly and unseen through natural environment. Double move, cannot be targeted."
  "Plant Growth":
    category: "Nature"
    range: "medium"
    targets: 1
    size: "medium"
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Causes plants to grow rapidly and healthily."
  "Plague":
    category: "Nature"
    range: "medium"
    area: "short"
    size: "medium"
    level: 3
    duration: "encounter"
    require:
    - check: { ability1: "Magic", ability2: "Fortitude" }
    description: "Plague of insects swarm an area, actions taken at disadvantage. Swarm ( H L T 10 | D E F 10)."
  "Speak with Animals":
    category: "Nature"
    range: "medium"
    targets: 1
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Caster speaks with animals and can ask 3 yes or no questions."
  "Summon Animal":
    category: "Nature"
    range: "medium"
    targets: 1
    size: "medium"
    level: 3
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Caster can sense and summon an animal to their location to follow simple commands."
  "Monument":
    category: "Nature"
    miracle: true
    cost: { "health": 2 }
    description: "Creates or grows a plant or rock based object the size of a settlement to the casters desired form or shape."

  # Rune Magic
  "Runes of Animation":
    category: "Rune"
    range: "medium"
    targets: 1
    size: "medium"
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Animates a non-living object, such as a statue or suit of armour, to fight for the caster."
  "Runes of Concealment":
    category: "Rune"
    range: "medium"
    targets: 1
    size: "medium"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Hides the target or an object from view, making them difficult to detect. Dispels when target interacts."
  "Runes of Fortune":
    category: "Rune"
    range: "medium"
    targets: 1
    duration: 1 hour
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Target gains a free re-roll."
  "Runes of Illusion":
    category: "Rune"
    range: "medium"
    targets: 1
    size: "medium"
    level: 3
    duration: "encounter"
    require:
    - check: { ability1: "Magic", ability2: "Will" }
    description: "Creates an illusion of something the caster has seen. Target can try to resist as a free action each turn."
  "Runes of Lightness":
    category: "Rune"
    range: "medium"
    targets: 1
    duration: "encounter"
    size: "medium"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Allows the target to float in the air up or down."
  "Runes of Defense":
    category: "Rune"
    range: "medium"
    targets: 1
    size: "medium"
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Grants the target +4 defence for the encounter."
  "Runes of Repulsion":
    category: "Rune"
    range: "medium"
    targets: 1
    size: "medium"
    area: "short"
    duration: "encounter"
    require:
    - check: { ability1: "Magic", ability2: "Will" }
    description: "Repels creatures or objects within a certain radius of the caster."
  "Runes of Summoning":
    category: "Rune"
    range: "medium"
    targets: 1
    size: "medium"
    level: 3
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Caster can sense and summon an animal to their location to follow simple commands."
  "Runes of Teleportation":
    category: "Rune"
    range: "medium"
    targets: 1
    size: "medium"
    level: 3
    require:
    - { ability: "Magic", roll: 10 }
    description: "Target can be teleported once to a location within range."
  "Rune of Enchant":
    category: "Rune"
    miracle: true
    cost: { health: 2 }
    description: "Creates a magic item (weapon, armour or object) by using the casters personal magic essence"

  # Shadow Magic
  "Shadow Bolt":
    category: "Shadow"
    range: "far"
    targets: 1
    Damage: "d6"
    require:
    - check: { ability1: "Magic", ability2: "Will" }
    description: "Powerful mental blast against target, ignores any damage resistance."
  "Disguise":
    category: "Shadow"
    range: "medium"
    targets: 1
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Target assumes the form of another person they have seen and can describe quite well."
  "Duplicate":
    category: "Shadow"
    range: "medium"
    targets: 1
    turns: 2
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Create a mirror image of the target which mimics its actions making it harder to fight them, all actions against the target at disadvantage."
  "Hypnosis":
    category: "Shadow"
    range: "medium"
    targets: 1
    duration: "encounter"
    size: "medium"
    level: 3
    require:
    - check: { ability1: "Magic", ability2: "Will" }
    description: "Hypnotic gaze which causes target to be transfixed. Magic vs. Will to resist. Target can try to resist as a free action each turn."
  "Fade":
    category: "Shadow"
    range: "medium"
    targets: 1
    size: "medium"
    level: 3
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Target becomes invisible. Spell ends when target engages someone."
  "Shadow Gate":
    category: "Shadow"
    range: "medium"
    targets: 1
    size: "medium"
    level: 3
    Spell Far range: null
    require:
    - check: { ability1: "Magic", ability2: "Will" }
    description: "Target can be telepor ted once to a location within range."
  "Shadows":
    category: "Shadow"
    range: "medium"
    area: "short"
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "A spell that allows the caster to manipulate and control shadows, potentially using them to hide."
  "Shadow Form":
    category: "Shadow"
    range: "medium"
    targets: 1
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "A spell that turns the caster into a shadowy form, allowing them to slip in small gaps."
  "Suggestion":
    category: "Shadow"
    range: "medium"
    targets: 1
    size: "medium"
    level: 3
    duration: "encounter"
    require:
    - check: { ability1: "Magic", ability2: "Will" }
    description: "Plants a suggestion for the target to follow a simple no risk order. Target can try to resist as a free action each turn."
  "Vision":
    category: "Shadow"
    range: "medium"
    targets: 1
    Spell Medium range: null
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Target gains the ability to see in the dark and spot invisible creatures."
  "Permanent Illusion":
    category: "Shadow"
    miracle: true
    cost: { health: 2 }
    description: "Caster creates a permanent illusion."

  # Psionic Magic
  "Domination":
    category: "Psionic"
    range: "medium"
    targets: 1
    size: "medium"
    level: 3
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Control the thoughts and actions of others. Target can try to resist as a free action each turn."
  "Manipulation":
    category: "Psionic"
    range: "medium"
    targets: 1
    size: "medium"
    level: 3
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Hides the target or an object from view, making them difficult to detect. Dispels when target interacts."
  "Mind Reading":
    category: "Psionic"
    range: "medium"
    targets: 1
    size: "medium"
    level: 3
    duration: "encounter"
    require:
    - check: { ability1: "Magic", ability2: "Will" }
    description: "Learn the thoughts of others and can ask 3 yes or no questions which are answered truthfully."
  "Projection":
    category: "Psionic"
    range: "medium"
    targets: 1
    size: "medium"
    level: 3
    duration: "encounter"
    require:
    - check: { ability1: "Magic", ability2: "Will" }
    description: "Creates an illusion of something the caster has seen. Target can try to resist as a free action each turn."
  "Precognition":
    category: "Psionic"
    range: "medium"
    targets: 1
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "See the future or sense impending danger, gain advantage on rolls when the situation first occurs."
  "Psychometry":
    category: "Psionic"
    range: "medium"
    targets: 1
    size: "medium"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Learn information about an object by touching it and can ask 3 yes or no questions which are answered truthfully."
  "Telekinesis":
    category: "Psionic"
    range: "medium"
    targets: 1
    size: "medium"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Target can move objects with their mind."
  "Telepathy":
    category: "Psionic"
    range: "far"
    targets: 1
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Communicate mentally with another creature."
  "Spirit":
    category: "Psionic"
    range: "medium"
    targets: 1
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Project your consciousness outside of your physical body. Your physical form is static. Spell is broken is form distracted."
  "Will":
    category: "Psionic"
    range: "medium"
    targets: 1
    size: "medium"
    level: 3
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Withstand pain or resist illness using the power of your mind. Damage resistance 1 and advantage against external effects."
  "Indoctrinate":
    category: "Psionic"
    miracle: true
    cost: { health: 2 }
    description: "Bend the will of an entire settlements population to your philosophy."

  # Time Magic  
  "Anchor":
    category: "Time"
    range: "medium"
    area: "short"
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Anchors a specific point in time, preventing it from being altered or affected by time magic."
  "Forget":
    category: "Time"
    range: "medium"
    targets: 1
    duration: "encounter"
    size: "medium"
    level: 3
    require:
    - check: { ability1: "Magic", ability2: "Will" }
    description: "Target forgets the circumstances of their last encounter."
  "Accellerate Time":
    category: "Time"
    range: "medium"
    targets: 1
    turns: 2
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Speeds up the passage of time, target gains an extra action each turn."
  "Object":
    category: "Time"
    range: "medium"
    targets: 1
    require:
    - check: { ability1: "Magic", ability2: "Will" }
    description: "Ages/de-ages an inanimate object (i.e. rusts a weapon)."
  "Prophecy":
    category: "Time"
    range: "medium"
    targets: 1
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Caster did something in the past to give an advantage in current situation."
  "Reverse":
    category: "Time"
    range: "medium"
    targets: 1
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Until your next turn the target can reverse one action against them."
  "Slow":
    category: "Time"
    range: "medium"
    targets: 1
    size: "medium"
    level: 3
    duration: "encounter"
    require:
    - check: { ability1: "Magic", ability2: "Will" }
    description: "Slows the passage of time around 1 person who acts once every 2 turns. Target can try to resist as a free action each turn."
  "Stop":
    category: "Time"
    range: "medium"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Stops time so only target can act. Upon successful check, target gains two additional actions this turn."
  "Time Bomb":
    category: "Time"
    range: "medium"
    area: "short"
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    effects:
    - damage: { die: "d6" }
    description: "Sets a brief delay before an explosive burst of temporal energy is released, injuring nearby creatures or objects."
  "Witness":
    category: "Time"
    range: "medium"
    duration: 1 Day
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Target can witness events at the location within the last day. Amplifying allows; Charged (1 week) Empowered (1 month) view fur ther back."
  "Time Travel":
    category: "Time"
    miracle: true
    cost: { health: 2 }
    description: "Can send one person back in time up to 100 years, there may be consequences."

  # Totem Magic
  "Totem of Agility":
    category: "Totem"
    targets: 1
    turns: 2
    require:
    - ingredients: [ [ "Crocodile Part", "Fox Part" ], [ "Panther Part", "Tiger Part", "Cat Part" ], "Monkey Part" ]
    - check: { ability: "Magic", roll: 10 }
    effects:
    - { path: "advantage.abilities.Agility", or: true }
    - { path: "advantage.abilities.Athletics", or: true }
    - { path: "advantage.abilities.Stealth", or: true }
    description: "Gives the totem user advantage on athletics checks."
  "Totem of Combat":
    category: "Totem"
    targets: 1
    turns: 2
    require:
    - ingredients: [ "Wolf Part", "Lion Part", "Tiger Part" ]
    - check: { ability: "Magic", roll: 10 }
    description: "Gives the totem use advantage on attacks."
  "Totem of Endurance":
    category: "Totem"
    targets: 1
    turns: 2
    require:
    - ingredients: [ "Horse Part" ]
    - check: { ability: "Magic", roll: 10 }
    description: "Gives the totem user advantage on fortitude checks."
  "Totem of Flight":
    category: "Totem"
    targets: 1
    turns: 2
    require:
    - ingredients: [ "Hawk Part", "Eagle Part" ]
    - check: { ability: "Magic", roll: 10 }
    description: "Gives the totem user the ability to fly."
  "Totem of Restoration":
    category: "Totem"
    targets: 1
    require:
    - ingredients: [ "Snake Part", "Dog Part" ] 
    - check: { ability: "Magic", roll: 10 }
    effects:
    - heal: { die: "d6" }
    description: "Allows the totem user to recover d6 health."
  "Totem of Strength":
    category: "Totem"
    targets: 1
    turns: 2
    require:
    - ingredients: [ "Bear Part", "Boar Part" ]
    - check: { ability: "Magic", roll: 10 }
    description: "Gives the totem user advantage on strength and damage checks."
  "Totem of Speed":
    category: "Totem"
    targets: 1
    turns: 2
    require:
    - ingredients: [ "Deer Part", "Panther Part" ]
    - check: { ability: "Magic", roll: 10 }
    description: "'Gives the totem user advantage on speed and agility checks."
  "Totem of Senses":
    category: "Totem"
    targets: 1
    turns: 2
    require:
    - ingredients: [ "Owl Part", "Bat Part" ]
    - check: { ability: "Magic", roll: 10 }
    description: "Gives the totem user advantage on magic checks."
  "Totem of Shadow":
    category: "Totem"
    targets: 1
    size: "medium"
    level: 3
    range: "medium"
    require:
    - ingredients: [ "Viper Part", "Wasp Part", "Snake Part", "Bull Part" ]
    - check: { ability1: "Magic", ability2: "Will" }
    description: "Creates a totem that strikes fear into the hearts of enemies forcing them to retreat for a turn."
  "Totem of Travel":
    category: "Totem"
    targets: 1
    require:
    - inventory: [ "Deer Part", "Hound Part" ]
    - check: { ability: "Magic", roll: 10 }
    description: "Gives the totem user the ability to increase wilderness movement speed x2 for the day."
  "Totem of Power":
    category: "Totem"
    miracle:
    cost: { health: 2 }
    description: "Grants a permanent power or ability."

  # Water Magic
  "Breathe":
    category: "Water"
    range: "medium"
    targets: 1
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Target may breathe underwater."
  "Cloud Fog":
    category: "Water"
    range: "medium"
    area: "short"
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Creates a fog cloud which obscures visions, actions at disadvantage within fog cloud."
  "Create Water":
    category: "Water"
    range: "medium"
    targets: 1
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Creates a flask sized body of water."
  "Form":
    category: "Water"
    range: "medium"
    targets: 1
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Target merges with a water element. Gain damage resistance of 2 and move double speed through water."
  "Healing Waters":
    category: "Water"
    range: "medium"
    targets: 1
    require:
    - check: { ability: "Magic", roll: 10 }
    effects:
    - heal: { die: "d6" }
    description: "Turns a small water source into healing waters which can be used to heal d6."
  "Cleanse":
    category: "Water"
    range: "medium"
    area: "short"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Purifies a nearby water source while this is used."
  "Walk":
    category: "Water"
    range: "medium"
    targets: 1
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Target may walk on water."
  "Water Wall":
    category: "Water"
    range: "medium"
    area: "short"
    duration: "encounter"
    require:
    - check: { ability: "Magic", roll: 10 }
    description: "Creates a powerful wall of water to slow/stop opponents ( H L T 20 | D E F 8 | S K L N/ A)."
  "Tidal Wave":
    category: "Water"
    miracle: true
    cost: { health: 2 }
    description: "Creates a tidal wave from a nearby body of water which causes destruction across a settlement sized area."

